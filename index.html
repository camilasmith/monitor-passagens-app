<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monitor de Passagens</title>
  <script>
    const API_BASE = "https://monitor-passagens-server.onrender.com";

    async function buscarVoos() {
      const origin = document.getElementById("origin").value.trim();
      const destination = document.getElementById("destination").value.trim();
      const departureDate = document.getElementById("departureDate").value.trim();

      if (!origin || !destination || !departureDate) {
        alert("Preencha origem, destino e data!");
        return;
      }

      try {
        document.getElementById("result").innerText = "üîé Buscando voos...";
        const res = await fetch(`${API_BASE}/api/search-flights?origin=${origin}&destination=${destination}&departureDate=${departureDate}`);
        const data = await res.json();

        if (data.error) {
          document.getElementById("result").innerText = "‚ùå Erro: " + data.error;
          return;
        }

        let html = "<h3>Ofertas encontradas:</h3><ul>";
        data.forEach(o => {
          html += `<li>‚úàÔ∏è ${o.airline} ‚Äî R$ ${o.price}</li>`;
        });
        html += "</ul>";
        document.getElementById("result").innerHTML = html;

      } catch (err) {
        document.getElementById("result").innerText = "‚ùå Falha na conex√£o com o servidor.";
        console.error(err);
      }
    }
  </script>
</head>
<body style="font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px;">
  <h1>Monitor de Passagens</h1>
  <p>Preencha os campos para buscar ofertas de voos em tempo real (via API Amadeus).</p>

  <label>Origem (IATA):</label><br>
  <input id="origin" placeholder="Ex: GRU"><br><br>

  <label>Destino (IATA):</label><br>
  <input id="destination" placeholder="Ex: LIS"><br><br>

  <label>Data de partida:</label><br>
  <input id="departureDate" type="date"><br><br>

  <button onclick="buscarVoos()">Buscar Voos</button>

  <div id="result" style="margin-top: 20px; font-size: 14px;"></div>
</body>
</html>
